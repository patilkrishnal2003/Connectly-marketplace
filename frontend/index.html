<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Connecttly Marketplace Demo</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .card {
      border: 1px solid #ddd;
      padding: 12px;
      margin: 8px;
      border-radius: 6px;
      width: 300px;
    }
    .locked { opacity: 0.6; }
    .grid {
      display: flex;
      flex-wrap: wrap;
    }
    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 12px;
      background: #eee;
      margin-left: 8px;
    }
  </style>
</head>

<body>
  <h1>Marketplace (Demo UI)</h1>
  <div id="grid" class="grid">Loading...</div>

<script>
async function loadDeals() {
  const res = await fetch("http://localhost:4000/api/deals?userId=user_1");
  const data = await res.json();
  const grid = document.getElementById("grid");
  grid.innerHTML = "";

  data.deals.forEach(d => {
    const card = document.createElement("div");
    card.className = "card " + (d.isUnlocked ? "" : "locked");
    
    card.innerHTML = `
      <strong>${d.title}</strong>
      <span class="badge">${d.partner}</span>
      <div style="margin-top: 10px;">
        ${d.isUnlocked
          ? `<button onclick="alert('Coupon shown for ${d.title}')">Get Deal</button>`
          : `<em>Locked — Buy Starter Plan to unlock</em>`
        }
      </div>
    `;
    grid.appendChild(card);
  });
}

loadDeals();
</script>

</body>
</html>
